@page
@model BugTrackerWeb.Pages.ProjectOwnerView.IndexModel
@{
    <p>This is an initial view for ProjectOwner</p>
    <br />
    <br />
    <div class="col-6">
        <h2 class="text-info">Projects List</h2>
    </div>
    if (Model.ProjectOwner.Projects.Count > 0)
    {
        <table class="table table-striped border">
            <tr class="table-secondary">
                <th>
                    <label asp-for="ProjectOwner.Projects.FirstOrDefault().Name"></label>
                </th>
                <th>
                    <label asp-for="ProjectOwner.Projects.FirstOrDefault().Description"></label>
                </th>
            </tr>
            @foreach (var p in Model.ProjectOwner.Projects)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(m => p.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(m => p.Description)
                    </td>
                    <td>
                        @*<a asp-page="ProjectDetails" asp-route-id="@p.Id">Details</a>*@
                        <button class="btn-info" onclick="loadTicketTable(@p.Id)">Ticket list</button>
                    </td>
                    <td>
                        <a asp-page="ManageUsers" asp-route-id="@p.Id">ManageUsers</a>
                    </td>
                </tr>
            }
        </table>

        <div class="col-12 border p-3">

            <table id="DT_load" class="table table-striped table-bordered" style="width:100%">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Description</th>
                        <th>Author</th>
                        <th>Actions</th>
                    </tr>
                </thead>
            </table>
        </div>
    }
    else
    {
        <p>No requests here!</p>
    }
}

@section Scripts{
    <script src="~/js/poProjDetails.js"></script>
}

